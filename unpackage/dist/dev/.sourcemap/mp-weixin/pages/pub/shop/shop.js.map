{"version":3,"sources":["uni-app:///main.js","webpack:///C:/Users/贾桎/Documents/HBuilderProjects/order-meal-app/pages/pub/shop/shop.vue?61de","webpack:///C:/Users/贾桎/Documents/HBuilderProjects/order-meal-app/pages/pub/shop/shop.vue?5236","webpack:///C:/Users/贾桎/Documents/HBuilderProjects/order-meal-app/pages/pub/shop/shop.vue?8d47","webpack:///C:/Users/贾桎/Documents/HBuilderProjects/order-meal-app/pages/pub/shop/shop.vue?967e","uni-app:///pages/pub/shop/shop.vue","webpack:///C:/Users/贾桎/Documents/HBuilderProjects/order-meal-app/pages/pub/shop/shop.vue?0603","webpack:///C:/Users/贾桎/Documents/HBuilderProjects/order-meal-app/pages/pub/shop/shop.vue?26bc"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","shopId","tabData","tabActiveIndex","list","leftMenuIndex","cardTop","menuTop","leftMenuScroll","rightCommodityScroll","morePopShow","moreCommodityData","moreActiveIndex","carData","carPopShow","evaluateClass","evaluateActive","evaluateContent","evaluateContentNum","evaluateScrollToLowerNum","computed","commodityNum","com","carCount","totalCarPrice","methods","selectTab","changeCurrent","clickLeftMenu","getCommodityPosition","uni","scrollRight","addOne","selectCom","minusOne","addMore","console","minusMore","title","addMoreToCar","closeMorePop","selectMore","openCarPop","closeCarPop","minusCarData","addCarData","goToBuy","clearCarData","reqEvaluateContent","restaurant_id","tag_name","offset","limit","selectEvaluate","evaluateScrollToLower","onLoad","el","item","onReady"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,aAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAA6H;AAC7H;AACwD;AACL;AACqC;;;AAGxF;AACiL;AACjL,gBAAgB,0LAAU;AAC1B,EAAE,0EAAM;AACR,EAAE,2FAAM;AACR,EAAE,oGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,+FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC/CA;AAAA;AAAA;AAAA;AAA0pB,CAAgB,+qBAAG,EAAC,C;;;;;;;;;;;;;;;;;;AC4N9qB;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eACA;EACAC;IACA;MACAC;MAAA;MACAC;MACAC;MAAA;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MACAC;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;IACA;EACA;;EACAC;IACA;IACAC;MACA;QACA;QACAC;UAAA;QAAA;QACA;MACA;IACA;IACA;IACAC;MACA;MACA;QAAA;MAAA;MACA;IACA;IACA;IACAC;MACA;MACA;QAAA;MAAA;MACA;IACA;EACA;EACAC;IACAC;MAAA;MACA;IACA;IACAC;MAAA;MACA;IACA;IACAC;MAAA;MACA;MACA;MACA;IACA;IACAC;MAAA;MAAA;MACAC;QACA9B;UACA;QACA;MACA;QACAA;UACA;QACA;MACA;IACA;IACA+B;MAAA;MACA;QACA;UACA;UACA;QACA;MACA;IACA;IACAC;MAAA;MACA;MACAC;MACA;IACA;IACAC;MAAA;MACA;MACAD;MACA;IACA;IACAE;MAAA;MACA;MACA;MACAC;IACA;IACAC;MAAA;MACAP;QACAQ;MACA;IACA;IACAC;MAAA;MACA;MACAN;MACA;MACA;IACA;IACAO;MAAA;MACA;MACA;IACA;IACAC;MAAA;MACA;IACA;IACAC;MAAA;MACA;MACAN;IACA;IACAO;MAAA;MACA;IACA;IACAC;MAAA;MACAR;MACApC;MACA;IACA;IACA6C;MAAA;MACA7C;IACA;IACA8C;MAAA;MACA;QAAAR;MAAA;IACA;IACAS;MAAA;MACA;QAAA;MAAA;MACA;IACA;IACAC;MAAA;MAAA;MACA;QAAAC;QAAAC;QAAAC;QAAAC;MAAA;MACA;QACA;QACAhB;MACA;IACA;IACAiB;MAAA;MACA;MACA;MACA;IACA;IACAC;MAAA;MACA;MACA;IACA;EAEA;EACAC;IAAA;IACA;IACA;MAAAN;IAAA;MACAO;QACAC;UAAA;YAAA;UAAA;QAAA;MACA;MACA;MACA;QACA;MACA;IACA;IACA;IACA;MACA;MACArB;MACA;IACA;EAGA;EACAsB,6BAEA;AACA;AAAA,2B;;;;;;;;;;;;;AC3YA;AAAA;AAAA;AAAA;AAA49B,CAAgB,s9BAAG,EAAC,C;;;;;;;;;;;ACAh/B;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/pub/shop/shop.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/pub/shop/shop.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./shop.vue?vue&type=template&id=00b0bfb4&scoped=true&\"\nvar renderjs\nimport script from \"./shop.vue?vue&type=script&lang=js&\"\nexport * from \"./shop.vue?vue&type=script&lang=js&\"\nimport style0 from \"./shop.vue?vue&type=style&index=0&id=00b0bfb4&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"00b0bfb4\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/pub/shop/shop.vue\"\nexport default component.exports","export * from \"-!D:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./shop.vue?vue&type=template&id=00b0bfb4&scoped=true&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l1 = _vm.__map(_vm.list, function (item, index) {\n    var $orig = _vm.__get_orig(item)\n    var l0 = _vm.__map(item.foods, function (commodity, __i0__) {\n      var $orig = _vm.__get_orig(commodity)\n      var g0 = commodity.specfoods.length\n      var m0 = g0 == 1 ? _vm.commodityNum(commodity) : null\n      var g1 = commodity.specfoods.length\n      var m1 = g1 > 1 ? _vm.commodityNum(commodity) : null\n      var m2 = _vm.commodityNum(commodity)\n      var m3 = _vm.commodityNum(commodity)\n      var g2 = commodity.specfoods.length\n      var g3 = commodity.specfoods.length\n      return {\n        $orig: $orig,\n        g0: g0,\n        m0: m0,\n        g1: g1,\n        m1: m1,\n        m2: m2,\n        m3: m3,\n        g2: g2,\n        g3: g3,\n      }\n    })\n    return {\n      $orig: $orig,\n      l0: l0,\n    }\n  })\n  var g4 = _vm.moreCommodityData.length\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l1: l1,\n        g4: g4,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./shop.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./shop.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"page\">\r\n\t\t<!-- 顶部 -->\r\n\t\t<view class=\"top\">\r\n\t\t\t<image class=\"user-img\" src=\"../../../static/logo.png\" mode=\"aspectFill\"></image>\r\n\t\t\t<view class=\"user-msg\">\r\n\t\t\t\t<view style='font-size: 18px;font-weight: bold;'>用户名称</view>\r\n\t\t\t\t<view class=\"\">商家配送/分钟送达/配送费￥5</view>\r\n\t\t\t\t<view class=\"\">公告：欢迎光临，用餐高峰请提前下单，谢谢</view>\r\n\t\t\t</view>\r\n\t\t\t<image class=\"go-icon\" src=\"../../../static/pub/前进.png\" mode=\"\"></image>\r\n\t\t</view>\r\n\t\t<!-- tab切换 -->\r\n\t\t<view class=\"tab-row\">\r\n\t\t\t<text v-for=\"(item,index) in tabData\" :class=\"{'tab-item-active':tabActiveIndex==index}\" class=\"tab-item\"\r\n\t\t\t\t@click=\"selectTab(index)\">{{item}}</text>\r\n\t\t</view>\r\n\t\t<!-- 页面切换 -->\r\n\t\t<swiper class=\"content-wrap\" :current='tabActiveIndex' @change='changeCurrent'>\r\n\t\t\t<!-- 商品页面 -->\r\n\t\t\t<swiper-item>\r\n\t\t\t\t<!-- 内容 -->\r\n\t\t\t\t<view class=\"content\">\r\n\t\t\t\t\t<view class=\"swiper-item commodity\">\r\n\t\t\t\t\t\t<!-- 左菜单 -->\r\n\t\t\t\t\t\t<scroll-view class=\"left-menu\" scroll-y=\"true\" :scroll-with-animation='true' :scroll-top='leftMenuScroll'>\r\n\t\t\t\t\t\t\t<!-- 菜单元素 -->\r\n\t\t\t\t\t\t\t<view class=\"left-menu-text\" :class=\"{'left-menu-active':leftMenuIndex==index}\" v-for=\"(item,index) in list\" @tap=\"clickLeftMenu(index)\">\r\n\t\t\t\t\t\t\t\t<view class=\"menu-dir\" :class=\"{'active-menu-dir':leftMenuIndex==index}\"></view>\r\n\t\t\t\t\t\t\t\t<text>{{item.name}}</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</scroll-view>\r\n\t\t\t\t\t\t<!-- 右商品列表 -->\r\n\t\t\t\t\t\t<scroll-view class=\"right-commodity\" scroll-y=\"true\" :scroll-with-animation='true' :scroll-top='rightCommodityScroll' @scroll=\"scrollRight\">\r\n\t\t\t\t\t\t\t<!-- 商品分类卡片 -->\r\n\t\t\t\t\t\t\t<view class=\"commodity-card\" v-for=\"(item,index) in list\" :key=\"index\">\r\n\t\t\t\t\t\t\t\t<!-- 标题 -->\r\n\t\t\t\t\t\t\t\t<view class=\"title-row\">\r\n\t\t\t\t\t\t\t\t\t<text class=\"title\">{{item.name}}</text>\r\n\t\t\t\t\t\t\t\t\t<text class=\"description\">{{item.description}}</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"commodity-wrap\">\r\n\t\t\t\t\t\t\t\t\t<!-- 商品元素 -->\r\n\t\t\t\t\t\t\t\t\t<view class=\"commodity-item\" v-for=\"commodity in item.foods\">\r\n\t\t\t\t\t\t\t\t\t\t<image class=\"commodity-image\"\r\n\t\t\t\t\t\t\t\t\t\t\t:src=\"'https://elm.cangdu.org/img/'+commodity.image_path\" mode=\"aspectFill\">\r\n\t\t\t\t\t\t\t\t\t\t</image>\r\n\t\t\t\t\t\t\t\t\t\t<div class='commodity-msg'>\r\n\t\t\t\t\t\t\t\t\t\t\t<!-- 标题栏 -->\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"commodity-title-row\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"title-box\">{{commodity.name}}</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"tag-wrap\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<view v-for='(tag,index) in commodity.attributes' :key=\"index\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<text  class=\"tag\" v-if=\"tag!=null\" :style=\"{color:'#'+tag.icon_color,border:'1px solid #'+tag.icon_color}\">{{tag.icon_name}}</text> \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t<!-- 描述栏 -->\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"commodity-description msg-row\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{{commodity.description}}\r\n\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t<!-- 售卖信息栏 -->\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"commodity-tips msg-row\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{{commodity.tips}}\r\n\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t<!-- 活动栏 -->\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"active-wrap\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<text  class=\"active msg-row\" v-if=\"commodity.activity != null\" :style=\"{color:'#'+commodity.activity.image_text_color,border:'1px solid #'+commodity.activity.icon_color}\">{{commodity.activity.image_text}}</text> \r\n\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t<!-- 价格栏 -->\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"price-row\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"price-text\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t￥{{commodity.specfoods[0].price}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"btn-box\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<view v-if=\"commodity.specfoods.length==1\" v-show=\"commodityNum(commodity)>0\" class=\"minus-btn\" @click=\"minusOne(commodity)\">-</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<view v-if=\"commodity.specfoods.length>1\" v-show=\"commodityNum(commodity)>0\" class=\"minus-btn\" @click=\"minusMore(commodity)\">-</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<view v-show=\"commodityNum(commodity)>0\" class=\"btn-box-num\">{{commodityNum(commodity)}}</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<view v-if=\"commodity.specfoods.length==1\" class=\"add-btn add-one\" @click=\"addOne(commodity)\">+</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<view v-if=\"commodity.specfoods.length>1\" class=\"add-btn add-more\" @click=\"addMore(commodity)\">选规格</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</scroll-view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\t\t\t\r\n\t\t\t</swiper-item>\r\n\t\t\t<!-- 评论页面 -->\r\n\t\t\t<swiper-item>\r\n\t\t\t\t<scroll-view style=\"height: 100%;\" scroll-y=\"true\" @scrolltolower=\"evaluateScrollToLower\">\r\n\t\t\t\t\t<view class=\"swiper-item evaluate\">\r\n\t\t\t\t\t\t<!-- 评价总分模块 -->\r\n\t\t\t\t\t\t<view class=\"evaluate-grade\">\r\n\t\t\t\t\t\t\t<view class=\"garde-left\">\r\n\t\t\t\t\t\t\t\t<view class=\"garde-num\">4.7</view>\r\n\t\t\t\t\t\t\t\t<view class=\"\">综合评价</view>\r\n\t\t\t\t\t\t\t\t<view class=\"garde-hint\">高于周边商家76.9%</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"garde-right\">\r\n\t\t\t\t\t\t\t\t<view class=\"garde-right-row\">\r\n\t\t\t\t\t\t\t\t\t<text class=\"garde-row-item garde-row-title\">服务态度</text>\r\n\t\t\t\t\t\t\t\t\t<view class=\"star-box\">\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"garde-row-item\" style=\"font-size: 24upx;\">⭐</text>\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"garde-row-item\" style=\"font-size: 24upx;\">⭐</text> \r\n\t\t\t\t\t\t\t\t\t\t<text class=\"garde-row-item\" style=\"font-size: 24upx;\">⭐</text> \r\n\t\t\t\t\t\t\t\t\t</view>\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t<text class=\"garde-row-item\" style=\"font-size: 28upx;color: #f60;\">4.7</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"garde-right-row\">\r\n\t\t\t\t\t\t\t\t\t<text class=\"garde-row-item garde-row-title\">菜品评价</text>\r\n\t\t\t\t\t\t\t\t\t<view class=\"star-box\">\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"garde-row-item\" style=\"font-size: 24upx;\">⭐</text>\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"garde-row-item\" style=\"font-size: 24upx;\">⭐</text> \r\n\t\t\t\t\t\t\t\t\t\t<text class=\"garde-row-item\" style=\"font-size: 24upx;\">⭐</text> \r\n\t\t\t\t\t\t\t\t\t</view>\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t<text class=\"garde-row-item\" style=\"font-size: 28upx;color: #f60;\">4.7</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"garde-right-row\">\r\n\t\t\t\t\t\t\t\t\t<text class=\"garde-row-item garde-row-title\">送达时间</text>\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t<text class=\"garde-row-item\" style=\"font-size: 24upx;color: #666;\">分钟</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<!-- 评价内容模块-->\r\n\t\t\t\t\t\t<view class=\"evaluate-content\">\r\n\t\t\t\t\t\t\t<!-- 评价分类 -->\r\n\t\t\t\t\t\t\t<view class=\"evaluate-class\">\r\n\t\t\t\t\t\t\t\t<view class=\"evaluate-item\" :class=\"{'active-evaluate':evaluateActive==index,'disable-evalute':index==2}\" v-for=\"(item,index) in evaluateClass\" @click=\"selectEvaluate(index)\">{{item.name}}({{item.count}})</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<!-- 评价文章 -->\r\n\t\t\t\t\t\t\t<view class=\"evaluate-article\">\r\n\t\t\t\t\t\t\t\t<!-- 单个文章板块 -->\r\n\t\t\t\t\t\t\t\t<view class=\"evaluate-article-item\" v-for=\"item in evaluateContent\">\r\n\t\t\t\t\t\t\t\t\t<!-- 头像包 -->\r\n\t\t\t\t\t\t\t\t\t<view class=\"evaluate-image-box\">\r\n\t\t\t\t\t\t\t\t\t\t<image :src=\"'https://elm.cangdu.org/'+item.avatar+'.jpeg'\" mode=\"aspectFill\"></image>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t<!-- 内容包 -->\r\n\t\t\t\t\t\t\t\t\t<view class=\"content-box\">\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"name-time-row\">\r\n\t\t\t\t\t\t\t\t\t\t\t<text>{{item.username}}</text>\r\n\t\t\t\t\t\t\t\t\t\t\t<text style=\"color: #999;\">{{item.rated_at}}</text>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"evaluate-star-row\">\r\n\t\t\t\t\t\t\t\t\t\t\t<text v-for=\"cont in item.rating_star\">⭐</text>\r\n\t\t\t\t\t\t\t\t\t\t\t<text style=\"margin-left: 10upx;\">{{item.time_spent_desc}}</text>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"commodity-image-row\">\r\n\t\t\t\t\t\t\t\t\t\t\t<image v-for=\"commodity in item.item_ratings\" :src=\"commodity.image_hash\" mode=\"aspectFill\"></image>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"evaluate-tag-row\">\r\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"evaluate-tag-item\">超级炸炸炸</text>\r\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"evaluate-tag-item\">韩式涮涮涮</text>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</scroll-view>\r\n\t\t\t</swiper-item>\r\n\t\t</swiper>\r\n\t\t<!-- 底部购物车 -->\r\n\t\t<view class=\"floor-car\" v-show=\"tabActiveIndex==0\">\r\n\t\t\t<view class=\"floor-img\" @click=\"openCarPop\">\r\n\t\t\t\t<text class=\"count-num\" v-show=\"carCount>0\" >{{carCount}}</text>\r\n\t\t\t\t<image  src=\"../../../static/logo.png\" mode=\"aspectFill\"></image>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"price-box\">\r\n\t\t\t\t<view style=\"font-size: 20px;font-weight: bold;\">¥{{totalCarPrice}}</view>\r\n\t\t\t\t<view>配送费¥5</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"over-btn\" @click=\"goToBuy\">去结算</view >\r\n\t\t</view>\r\n\t\t<!-- 购物车弹窗 -->\r\n\t\t<view v-show=\"carPopShow\" class=\"car-pop pop\" @click=\"closeCarPop\">\r\n\t\t\t<view class=\"car-wrap\" @click.stop=''>\r\n\t\t\t\t<view class=\"car-title\">\r\n\t\t\t\t\t<view style=\"font-size: 36upx;\">购物车</view>\r\n\t\t\t\t\t<view class=\"\" @click=\"clearCarData\">清空</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<!-- 购物车内容 -->\r\n\t\t\t\t<view class=\"car-cont\">\r\n\t\t\t\t\t<view class=\"car-item-row\" v-for=\"(item,index) in carData\" :key=\"item._id\">\r\n\t\t\t\t\t\t<view class=\"car-item-title-box\">\r\n\t\t\t\t\t\t\t<view class=\"car-item-title\">{{item.name}}</view>\r\n\t\t\t\t\t\t\t<view class=\"car-item-des\">{{item.specs_name}}</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"car-item-price\">￥{{item.price}}</view>\r\n\t\t\t\t\t\t<view class=\"btn-box\">\r\n\t\t\t\t\t\t\t<view  class=\"minus-btn\" @click=\"minusCarData(item,index)\">-</view>\r\n\t\t\t\t\t\t\t<view  class=\"btn-box-num\">{{item.num}}</view>\r\n\t\t\t\t\t\t\t<view  class=\"add-btn add-one\" @click=\"addCarData(item,index)\">+</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\t\r\n\t\t</view>\r\n\t\t<!-- 多规格弹窗 -->\r\n\t\t<view v-show=\"morePopShow\" class=\"more-pop pop\">\r\n\t\t\t<view class=\"more-wrap\">\r\n\t\t\t\t<view class=\"close-pop\" @click=\"closeMorePop\" >关闭</view>\r\n\t\t\t\t<view class=\"more-title\">标题</view>\r\n\t\t\t\t<view style=\"color: #666;font-size: 14px;\">规格</view>\r\n\t\t\t\t<view class=\"more-content\">\r\n\t\t\t\t\t<view class=\"more-item\" :class=\"{'more-item-active':moreActiveIndex==index}\" v-for=\"(item,index) in moreCommodityData\" @click=\"selectMore(index)\">{{item.name}}</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"more-price-row\">\r\n\t\t\t\t\t<view class=\"\" v-if=\"moreCommodityData.length!=0\" >￥{{moreCommodityData[moreActiveIndex].price}}</view>\r\n\t\t\t\t\t<view class=\"add-btn more-pop-btn\" @click=\"addMoreToCar\">加入购物车</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport { $commodity_list , $comment_class, $comment_content } from 'apis/jz-port.js'\r\n\timport { nextTick } from \"vue\"\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tshopId:1,\t//商铺id\r\n\t\t\t\ttabData: ['商品', '评价'],\r\n\t\t\t\ttabActiveIndex:1, //选中tab下标\r\n\t\t\t\tlist: [],\r\n\t\t\t\tleftMenuIndex: 0 ,//选中左菜单的下标\r\n\t\t\t\tcardTop:[] ,//商品卡片距离顶部的距离\r\n\t\t\t\tmenuTop:[] ,//菜单距离顶部的距离\r\n\t\t\t\tleftMenuScroll:0,\r\n\t\t\t\trightCommodityScroll:0,\r\n\t\t\t\tmorePopShow:false,\r\n\t\t\t\tmoreCommodityData:[] ,//多个商品的数据存放进容器中\r\n\t\t\t\tmoreActiveIndex:0, //选中多规格的下标\r\n\t\t\t\tcarData:[],\r\n\t\t\t\tcarPopShow:false,\t//控制购物车弹窗显示\r\n\t\t\t\tevaluateClass:[],\t//购物车分类容器\r\n\t\t\t\tevaluateActive:0,\t//选中评价的下标\r\n\t\t\t\tevaluateContent:[],\t//评价容器\r\n\t\t\t\tevaluateContentNum:10, //每次评价内容请求10条\r\n\t\t\t\tevaluateScrollToLowerNum:0, //评价内容滚动底部次数\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed:{\r\n\t\t\t//计算每个商品的选择数量\r\n\t\t\tcommodityNum(){\r\n\t\t\t\treturn function(com){\r\n\t\t\t\t\tlet num = 0\r\n\t\t\t\t\tcom.specfoods.forEach(el=> num = num + el.num)\r\n\t\t\t\t\treturn num\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 购物车计件总数\r\n\t\t\tcarCount(){\r\n\t\t\t\tlet num = 0;\r\n\t\t\t\tthis.carData.forEach(el=>num = num + el.num)\r\n\t\t\t\treturn num\r\n\t\t\t},\r\n\t\t\t// 购物车总价\r\n\t\t\ttotalCarPrice(){\r\n\t\t\t\tlet totalPrice = 0\r\n\t\t\t\tthis.carData.forEach(el=>totalPrice += el.price)\r\n\t\t\t\treturn totalPrice\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tselectTab(index) { //选中tab栏下标\r\n\t\t\t\tthis.tabActiveIndex = index\r\n\t\t\t},\r\n\t\t\tchangeCurrent(e) { //滑动页面改变选中\r\n\t\t\t\tthis.tabActiveIndex = e.detail.current\r\n\t\t\t},\r\n\t\t\tclickLeftMenu(index) { //点击左侧菜单元素\r\n\t\t\t\tthis.leftMenuIndex = index\r\n\t\t\t\tthis.leftMenuScroll = this.menuTop[index]\r\n\t\t\t\tthis.rightCommodityScroll = this.cardTop[index]\r\n\t\t\t},\r\n\t\t\tgetCommodityPosition(){\t//获取商品卡片位置信息与菜单位置信息\r\n\t\t\t\tuni.createSelectorQuery().in(this).selectAll('.commodity-card').boundingClientRect(data=>{\r\n\t\t\t\t\tdata.forEach(el=>{\r\n\t\t\t\t\t\tthis.cardTop.push(el.top-143)\r\n\t\t\t\t\t})\r\n\t\t\t\t}).selectAll('.left-menu-text').boundingClientRect(data=>{\r\n\t\t\t\t\tdata.forEach(el=>{\r\n\t\t\t\t\t\tthis.menuTop.push(el.top-143)\r\n\t\t\t\t\t})\r\n\t\t\t\t}).exec()\r\n\t\t\t},\r\n\t\t\tscrollRight(el){\t//滚动右侧商品列表\r\n\t\t\t\tfor(let i=0; i<this.cardTop.length; i++){\r\n\t\t\t\t\tif(el.detail.scrollTop>=this.cardTop[i]&&el.detail.scrollTop<this.cardTop[i+1]){\r\n\t\t\t\t\t\tthis.leftMenuScroll=this.menuTop[i] \r\n\t\t\t\t\t\tthis.leftMenuIndex=i;\r\n\t\t\t\t\t} \r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\taddOne(data){\t//增加单个商品数量\r\n\t\t\t\tlet selectCom = data.specfoods[0]\r\n\t\t\t\tselectCom.num++\r\n\t\t\t\tif(!this.carData.includes(selectCom)) this.carData.push(selectCom)\r\n\t\t\t},\r\n\t\t\tminusOne(data){\t//减少单个商品数量\r\n\t\t\t\tlet selectCom = data.specfoods[0]\r\n\t\t\t\tselectCom.num--\r\n\t\t\t\tif(selectCom.num==0) this.carData.splice(this.carData.indexOf(selectCom),1)\r\n\t\t\t},\r\n\t\t\taddMore(data){\t//将多个商品的数据存放进容器中\r\n\t\t\t\tthis.moreCommodityData = data.specfoods\r\n\t\t\t\tthis.morePopShow = true\r\n\t\t\t\tconsole.log(this.moreCommodityData)\r\n\t\t\t},\r\n\t\t\tminusMore(){\t//减少多规格商品\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle:'请在购物车界面删除多规格商品'\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\taddMoreToCar(){\t//将选中的多规格商品加入购物车\r\n\t\t\t\tlet selectCom = this.moreCommodityData[this.moreActiveIndex]\r\n\t\t\t\tselectCom.num++\r\n\t\t\t\tif(!this.carData.includes(selectCom)) this.carData.push(selectCom)\t\t\r\n\t\t\t\tthis.closeMorePop()\t//关闭多规格弹窗\r\n\t\t\t},\r\n\t\t\tcloseMorePop(){\t//关闭多规格弹窗\r\n\t\t\t\tthis.morePopShow = false\r\n\t\t\t\tthis.moreCommodityData = []\r\n\t\t\t},\r\n\t\t\tselectMore(index){\t//选中多规格商品\r\n\t\t\t\tthis.moreActiveIndex = index\t\r\n\t\t\t},\r\n\t\t\topenCarPop(){\t\t//打开购物车弹窗\r\n\t\t\t\tthis.carPopShow = true\r\n\t\t\t\tconsole.log(this.carData)\r\n\t\t\t},\r\n\t\t\tcloseCarPop(){\t//关闭购物车弹窗\r\n\t\t\t\tthis.carPopShow = false\r\n\t\t\t},\r\n\t\t\tminusCarData(data,index){\t//购物车内减少商品\r\n\t\t\t\tconsole.log(data,index)\r\n\t\t\t\tdata.num--\r\n\t\t\t\tif(data.num<=0) this.carData.splice(index,1)\r\n\t\t\t},\r\n\t\t\taddCarData(data,index){\t//购物车内增加商品\r\n\t\t\t\tdata.num++\r\n\t\t\t},\r\n\t\t\tgoToBuy(){\t//去结算\r\n\t\t\t\tthis.carData.length == 0? uni.showToast({title:'请选择商品'}) : console.log(this.carData,'去结算')\r\n\t\t\t},\r\n\t\t\tclearCarData(){\t//清空购物车\r\n\t\t\t\tthis.carData.forEach(el=>el.num=0)\r\n\t\t\t\tthis.carData = []\r\n\t\t\t},\r\n\t\t\treqEvaluateContent(){\t\t//请求评价信息\r\n\t\t\t\tlet data = { restaurant_id:this.shopId, tag_name:this.evaluateClass[this.evaluateActive].name, offset:this.evaluateScrollToLowerNum*this.evaluateContentNum, limit:this.evaluateContentNum }\r\n\t\t\t\t$comment_content(this.shopId,data).then((el)=>{\r\n\t\t\t\t\tthis.evaluateContent = this.evaluateContent.concat(el.data) \r\n\t\t\t\t\tconsole.log(this.evaluateContent)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tselectEvaluate(index){\t//选择评价分类\r\n\t\t\t\tthis.evaluateActive = index\r\n\t\t\t\tthis.evaluateContent = [] //初始化容器\r\n\t\t\t\tthis.reqEvaluateContent() //请求评价信息\r\n\t\t\t},\r\n\t\t\tevaluateScrollToLower(){\t//评价滚动到底部\r\n\t\t\t\tthis.evaluateScrollToLowerNum++\r\n\t\t\t\tthis.reqEvaluateContent()\r\n\t\t\t}\r\n\t\t\r\n\t\t},\r\n\t\tonLoad() {\r\n\t\t\t//请求商品数据\r\n\t\t\t$commodity_list({restaurant_id:this.shopId}).then((el) => {\r\n\t\t\t\tel.data.forEach(item=>{\r\n\t\t\t\t\titem.foods.forEach(food=>food.specfoods.forEach(specfood=>specfood.num=0))\r\n\t\t\t\t})\r\n\t\t\t\tthis.list = el.data\r\n\t\t\t\tthis.$nextTick(function(){\r\n\t\t\t\t\tthis.getCommodityPosition() //获取页面节点信息\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t\t//请求评论分类\r\n\t\t\t$comment_class(this.shopId).then((el)=>{\r\n\t\t\t\tthis.evaluateClass = el.data\r\n\t\t\t\tconsole.log(this.evaluateClass,this.evaluateClass[this.evaluateActive].name)\r\n\t\t\t\tthis.reqEvaluateContent()\t\t//请求评价信息\r\n\t\t\t})\r\n\r\n\t\t\t\r\n\t\t},\r\n\t\tonReady() {\r\n\t\t\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style scoped>\r\n\t@import url(\"shop.css\");\t\r\n\t/* 已改 */\r\n</style>\n","import mod from \"-!D:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./shop.vue?vue&type=style&index=0&id=00b0bfb4&scoped=true&lang=css&\"; export default mod; export * from \"-!D:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./shop.vue?vue&type=style&index=0&id=00b0bfb4&scoped=true&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1674649173089\n      var cssReload = require(\"D:/HBuilder X/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}